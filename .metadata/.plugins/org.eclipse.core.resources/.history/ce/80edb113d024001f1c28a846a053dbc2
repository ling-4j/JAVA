package myio;

import java.io.*;
import java.util.List;
import objects.TV;

public class MyFile {

    /**
     * Xuất danh sách TV ra file nhị phân
     * 
     * @param tvList danh sách TV cần lưu
     * @throws IOException
     */
    public static void binaryOutputFile(List<TV> tvList) throws IOException {
        try (FileOutputStream outf = new FileOutputStream("TV.bin");
             ObjectOutputStream out = new ObjectOutputStream(outf)) {

            out.writeObject(tvList);
        }
    }

    /**
     * Đọc danh sách TV từ file nhị phân
     * 
     * @return danh sách TV được đọc từ file
     * @throws IOException
     * @throws ClassNotFoundException
     */
    public static List<TV> binaryInputFile() throws IOException, ClassNotFoundException {
        try (FileInputStream inf = new FileInputStream("TV.bin");
             ObjectInputStream in = new ObjectInputStream(inf)) {

            return (List<TV>) in.readObject();
        }
    }

    public static void main(String[] args) {
        try {
            // Tạo một danh sách TV để test
            List<TV> tvList = ... // Khởi tạo hoặc lấy từ đâu đó

            // Lưu danh sách TV vào file
            binaryOutputFile(tvList);

            // Đọc danh sách TV từ file và hiển thị
            List<TV> loadedData = binaryInputFile();
            loadedData.forEach(System.out::println);
        } catch (IOException | ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
}
