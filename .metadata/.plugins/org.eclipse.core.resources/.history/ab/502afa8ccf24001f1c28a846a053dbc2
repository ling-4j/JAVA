package myio;

import java.io.*;

public class MyFile {

	/**
	 * Xuất dữ liệu ra file nhị phân
	 * 
	 * @throws IOException
	 */
	public static void binaryOutputFile(int n) throws IOException {
		try (FileOutputStream outf = new FileOutputStream("TV.bin");
			 DataOutputStream out = new DataOutputStream(outf)) {

			out.writeInt(n); // Số lượng bản ghi trợ giúp đọc

			for (int i = 0; i < n; i++) {
				out.writeInt(123 + i);
				out.writeUTF("Học về file nhị phân");
				out.writeDouble(123.45 + i);
				out.writeBoolean(false);
			}
		}
	}

	public static void binaryInputFile() throws IOException {
		try (FileInputStream inf = new FileInputStream("TV.bin");
			 DataInputStream in = new DataInputStream(inf)) {

			int recCount;
			String aStr;
			int anInt;
			double aDouble;
			boolean aBoolean;

			// Đọc số lượng bản ghi dữ liệu
			recCount = in.readInt();
			for (int i = 0; i < recCount; i++) {
				anInt = in.readInt();
				System.out.println(anInt);

				aStr = in.readUTF();
				System.out.println(aStr);

				aDouble = in.readDouble();
				System.out.println(aDouble);

				aBoolean = in.readBoolean();
				System.out.println(aBoolean);
			}
		}
	}

	public static void main(String[] args) {
		try {
			binaryOutputFile(5); // Thay đổi số lượng bản ghi tùy ý
			binaryInputFile();
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
}
